import requests

from django.core.management.base import BaseCommand, CommandError
from polls.models import Question as Poll

class Comand(BaseCommand):
	help = 'Upload infromation about location from JSON to database'

	def add_arguments(self, parser):
		parser.add_argument('location_json_url', nargs='+', type=str)

	def handle(self, *args, **options):
		try:
			r=requests.get(location_json_url, timeout=0.1)
			r.raise_for_status()
                        r.json()
			location_title = r['title']
			location_images = r['imgs']
			location_description_short = r['description_short']
			location_description_long = r['description_long']
			location_latitude = r['coordinates']['lat']
			location_longtitude = r['coordinates']['lng']
			obj, new_location = Place.objects.get_or_create()
			

			


		except ConnectionError:
			pass
		except HttpError:
			pass
		except Timeout:
			pass



